{%  extends 'base.html' %}
{% load bootstrap5 %}

{% block content %}
<!-- Header Section -->
<div class="hero-section" style="padding: 2rem 0; margin-top: 4rem;">
    <div class="container hero-content text-center">
        <div class="icon-feature mx-auto mb-3">
            <i class="fas fa-file-contract fa-lg"></i>
        </div>
        <h2 class="fw-bold mb-2" style="font-family: 'Noto Sans KR', sans-serif;">이용약관 및 개인정보 수집 동의</h2>
        <p class="lead mb-0">안전한 서비스 이용을 위한 약관에 동의해 주세요</p>
    </div>
</div>

<div class="container my-5" style="max-width: 700px; padding: 0 2rem;">
    <div class="agreement-card" style="background: white; border-radius: 20px; padding: 2.5rem; box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); border: 1px solid #f1f5f9; position: relative; overflow: hidden;">
        <div class="card-decoration" style="position: absolute; top: -30px; right: -30px; width: 100px; height: 100px; background: linear-gradient(135deg, #a7f3d0, #6ee7b7); border-radius: 50%; opacity: 0.1;"></div>
        
        <div class="text-center mb-4 position-relative">
            <div class="user-avatar mx-auto mb-3" style="width: 70px; height: 70px; background: linear-gradient(135deg, #a7f3d0, #6ee7b7); border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);">
                <i class="fas fa-shield-check" style="color: #10b981; font-size: 2rem;"></i>
            </div>
            <h4 class="fw-bold mb-1" style="color: #1e293b;">개인정보 수집 및 이용 동의</h4>
            <p class="text-muted mb-0" style="font-size: 0.9rem;">회원가입을 위해 다음 내용을 확인하고 동의해 주세요</p>
        </div>
        
        <!-- Agreement Content Cards -->
        <div class="agreement-sections mb-4">
            <div class="row g-3">
                <div class="col-md-6">
                    <div class="info-card" style="background: #f0f9ff; border-radius: 12px; padding: 1.25rem; border: 1px solid #e0f2fe; text-align: center;">
                        <div class="info-icon mb-2" style="width: 40px; height: 40px; background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                            <i class="fas fa-database" style="color: #3b82f6;"></i>
                        </div>
                        <h6 class="fw-bold mb-2" style="color: #1e40af; font-size: 0.9rem;">수집 항목</h6>
                        <p class="mb-0" style="font-size: 0.8rem; color: #475569; line-height: 1.4;">이름, 이메일, 휴대폰번호, 생년월일</p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="info-card" style="background: #f0fdf4; border-radius: 12px; padding: 1.25rem; border: 1px solid #dcfce7; text-align: center;">
                        <div class="info-icon mb-2" style="width: 40px; height: 40px; background: linear-gradient(135deg, #d1fae5, #a7f3d0); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                            <i class="fas fa-bullseye" style="color: #10b981;"></i>
                        </div>
                        <h6 class="fw-bold mb-2" style="color: #047857; font-size: 0.9rem;">수집 목적</h6>
                        <p class="mb-0" style="font-size: 0.8rem; color: #475569; line-height: 1.4;">본인 확인 및 예약서비스 제공</p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="info-card" style="background: #fffbeb; border-radius: 12px; padding: 1.25rem; border: 1px solid #fed7aa; text-align: center;">
                        <div class="info-icon mb-2" style="width: 40px; height: 40px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                            <i class="fas fa-clock" style="color: #f59e0b;"></i>
                        </div>
                        <h6 class="fw-bold mb-2" style="color: #d97706; font-size: 0.9rem;">보유 기간</h6>
                        <p class="mb-0" style="font-size: 0.8rem; color: #475569; line-height: 1.4;">서비스 이용기간 동안</p>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="info-card" style="background: #fef2f2; border-radius: 12px; padding: 1.25rem; border: 1px solid #fecaca; text-align: center;">
                        <div class="info-icon mb-2" style="width: 40px; height: 40px; background: linear-gradient(135deg, #fee2e2, #fecaca); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                            <i class="fas fa-exclamation-triangle" style="color: #ef4444;"></i>
                        </div>
                        <h6 class="fw-bold mb-2" style="color: #dc2626; font-size: 0.9rem;">동의 거부 권리</h6>
                        <p class="mb-0" style="font-size: 0.8rem; color: #475569; line-height: 1.4;">거부 시 회원가입 불가</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Agreement Checkbox -->
        <form method="post" class="agreement-form">
            {% csrf_token %}
            
            <div class="agreement-section mb-4" style="background: #fefce8; border-radius: 12px; padding: 1.5rem; border: 2px solid #fef3c7; text-align: center;">
                <div class="agreement-icon mx-auto mb-3" style="width: 45px; height: 45px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(245, 158, 11, 0.2);">
                    <i class="fas fa-handshake" style="color: #f59e0b; font-size: 1.2rem;"></i>
                </div>
                
                <h6 class="fw-bold mb-3" style="color: #92400e; font-size: 0.95rem;">필수 동의 사항</h6>
                
                <div class="form-check d-flex align-items-center justify-content-center mb-3">
                    <input type="checkbox" name="agreed" id="agree-checkbox" class="form-check-input me-3" style="width: 1.2rem; height: 1.2rem; border: 2px solid #d1d5db; border-radius: 4px;">
                    <label for="agree-checkbox" class="form-check-label fw-semibold" style="color: #92400e; cursor: pointer; font-size: 0.9rem;">
                        이용약관과 개인정보 수집에 동의합니다
                    </label>
                </div>
                
                <small class="text-muted" style="font-size: 0.8rem;">
                    <i class="fas fa-info-circle me-1"></i>
                    회원가입을 위해 반드시 동의해야 하는 항목입니다
                </small>
            </div>
            
            <div class="form-actions text-center mb-4">
                <button type="submit" class="btn-submit" id="submit-button" disabled onclick="session_close()" style="background: white; color: #10b981; padding: 0.875rem 2.5rem; border-radius: 12px; border: 2px solid #10b981; font-weight: 700; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15); transition: all 0.2s ease; display: inline-flex; align-items: center; font-size: 1rem; cursor: pointer;">
                    <i class="fas fa-user-plus me-2"></i>가입하기
                </button>
            </div>
        </form>
        
        <!-- Back to Login -->
        <div class="text-center">
            <div class="back-link-wrapper" style="background: #f1f5f9; border-radius: 12px; padding: 1.25rem; border: 1px solid #e2e8f0;">
                <p class="mb-2" style="color: #475569; font-size: 0.9rem;">
                    <i class="fas fa-arrow-left me-2"></i>이미 계정이 있으신가요?
                </p>
                <a href="{% url 'accountapp:login' %}" class="btn-back" style="background: white; color: #475569; padding: 0.5rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; border: 1px solid #cbd5e1; transition: all 0.2s ease; display: inline-flex; align-items: center;">
                    <i class="fas fa-sign-in-alt me-2"></i>로그인하기
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .agreement-form .form-check-input {
        border: 2px solid #d1d5db;
        border-radius: 4px;
        transition: all 0.2s ease;
    }
    
    .agreement-form .form-check-input:checked {
        background-color: #10b981;
        border-color: #10b981;
    }
    
    .agreement-form .form-check-input:focus {
        box-shadow: 0 0 0 0.2rem rgba(16, 185, 129, 0.25);
        border-color: #10b981;
    }
    
    .btn-submit:disabled {
        background-color: #9ca3af !important;
        color: #d1d5db !important;
        border-color: #9ca3af !important;
        cursor: not-allowed;
        opacity: 0.6;
        transform: none !important;
        box-shadow: none !important;
    }
    
    .btn-submit:hover:not(:disabled) {
        background: #10b981 !important;
        color: white !important;
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        border-color: #10b981 !important;
    }
    
    .btn-back:hover {
        background: #f8fafc !important;
        transform: translateY(-1px);
        box-shadow: 0 2px 6px rgba(71, 85, 105, 0.2);
        color: #334155 !important;
        text-decoration: none;
    }
    
    .agreement-card:hover {
        box-shadow: 0 12px 28px -3px rgba(0, 0, 0, 0.12), 0 6px 8px -2px rgba(0, 0, 0, 0.05);
    }
    
    .info-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
    }
    
    @media (max-width: 768px) {
        .container {
            padding: 0 0.5rem !important;
            max-width: 100% !important;
            margin-left: auto !important;
            margin-right: auto !important;
        }
        
        .hero-section {
            padding: 1.5rem 0 !important;
            margin-top: 3rem !important;
        }
        
        .hero-section h2 {
            font-size: 1.5rem !important;
        }
        
        .hero-section .lead {
            font-size: 1rem !important;
        }
        
        .agreement-card {
            padding: 1rem !important;
            border-radius: 16px !important;
            margin: 0 !important;
            max-width: 100% !important;
            box-sizing: border-box !important;
        }
        
        .user-avatar {
            width: 60px !important;
            height: 60px !important;
            margin-bottom: 1rem !important;
        }
        
        .user-avatar i {
            font-size: 1.5rem !important;
        }
        
        .agreement-sections .row {
            gap: 0.75rem !important;
        }
        
        .info-card {
            padding: 1rem !important;
            margin-bottom: 0.5rem !important;
        }
        
        .info-card h6 {
            font-size: 0.85rem !important;
        }
        
        .info-card p {
            font-size: 0.75rem !important;
        }
        
        .agreement-section {
            padding: 1.25rem !important;
            margin-bottom: 1.5rem !important;
        }
        
        .form-check-input {
            width: 1.1rem !important;
            height: 1.1rem !important;
        }
        
        .form-check-label {
            font-size: 0.85rem !important;
        }
        
        .btn-submit {
            width: 100%;
            justify-content: center;
            padding: 0.75rem 2rem !important;
            font-size: 0.9rem !important;
        }
        
        .back-link-wrapper {
            padding: 1rem !important;
            margin: 0 !important;
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box !important;
        }
        
        .back-link-wrapper p {
            font-size: 0.8rem !important;
        }
        
        .btn-back {
            padding: 0.6rem 1.25rem !important;
            font-size: 0.8rem !important;
        }
    }
    
    @media (max-width: 576px) {
        .container {
            padding: 0 0.25rem !important;
            max-width: 100vw !important;
            margin: 0 !important;
        }
        
        .hero-section {
            padding: 1rem 0 !important;
            margin-top: 2.5rem !important;
        }
        
        .agreement-card {
            padding: 0.75rem !important;
            margin: 0 !important;
            width: 100% !important;
            max-width: 100% !important;
        }
        
        .agreement-sections .col-md-6 {
            width: 100% !important;
            margin-bottom: 0.5rem !important;
        }
        
        .info-card {
            padding: 0.8rem !important;
            margin-bottom: 0.5rem !important;
            width: 100% !important;
            max-width: calc(100vw - 1rem) !important;
            box-sizing: border-box !important;
        }
        
        .agreement-section {
            padding: 1rem !important;
            margin-bottom: 1rem !important;
            width: 100% !important;
            max-width: calc(100vw - 1rem) !important;
            box-sizing: border-box !important;
        }
        
        .form-check {
            margin-bottom: 1rem !important;
            justify-content: center !important;
            flex-wrap: wrap !important;
            text-align: center !important;
        }
        
        .form-check-label {
            font-size: 0.8rem !important;
            line-height: 1.4 !important;
            word-break: keep-all !important;
        }
        
        .btn-submit {
            padding: 0.7rem 2rem !important;
            font-size: 0.85rem !important;
        }
        
        .back-link-wrapper {
            padding: 0.8rem !important;
            margin: 0 !important;
            width: 100% !important;
            max-width: calc(100vw - 1rem) !important;
            box-sizing: border-box !important;
        }
    }
</style>

<script>
    const agreeCheckbox = document.getElementById("agree-checkbox");
    const submitButton = document.getElementById("submit-button");

    agreeCheckbox.addEventListener("change", () => {
        submitButton.disabled = !agreeCheckbox.checked;
        if (agreeCheckbox.checked) {
            submitButton.classList.remove('opacity-50');
        } else {
            submitButton.classList.add('opacity-50');
        }
    });

    function session_close() {
        if (typeof session !== 'undefined' && session.invalidate) {
            session.invalidate();
        }
    }
</script>

{% endblock %}