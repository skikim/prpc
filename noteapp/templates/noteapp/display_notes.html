{% extends 'base.html' %}
{% load bootstrap5 %}

{% block content %}
    {% if notes %}
{#    {% if unread_notes_count > 0 %}#}
        <div class="modal" tabindex="-1" role="dialog" id="notes-modal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">새 메시지</h5>
                        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close" onclick="modal_close()">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <ul class="list-group">
                            {% for note in notes reversed %}
                                <li class="list-group-item {% if not note.is_read %}list-group-item-warning{% endif %}">
                                    <p>{{ note.message }}</p>
                                    <div style="text-align: right"><small class="text-muted">-{{ note.sender.profile.real_name }}-  {{ note.timestamp }}</small></div>
                                    <form method="POST" action="{% url 'noteapp:delete_notes' note.id %}" style="display: inline">
                                        {% csrf_token %}
                                        <button type="submit" class="btn btn-danger btn-sm rounded-pill">삭제</button>
                                    </form>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="modal-footer">
{#                        <form method="post" action="{% url 'noteapp:delete_all_notes' %}" style="display: inline">#}
{#                            {% csrf_token %}#}
{#                            <button type="submit" class="btn btn-danger rounded-pill">전체 삭제</button>#}
{#                        </form>#}
                        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="modal_close()">닫기</button>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $(function() {
                $('#notes-modal').modal('show');
            });
        </script>
    {% endif %}
    <script>
        function modal_close() {
            $('#notes-modal').modal('hide');
        }
    </script>
{% endblock %}


